name: Action-Test

run-name: "Action-Test - [${{ github.event.pull_request.title }} #${{ github.event.pull_request.number }}] by @${{ github.actor }}"

on:
  workflow_dispatch:
  pull_request:
  schedule:
    - cron: '0 0 * * *'

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

permissions:
  contents: read
  pull-requests: read

jobs:
  # ActionTest:
  #   uses: ./.github/workflows/TestWorkflow.yml
  #   secrets: inherit
  #   strategy:
  #     fail-fast: false
  #     matrix:
  #       os: [ubuntu-latest, macos-latest, windows-latest]
  #   with:
  #     runs-on: ${{ matrix.os }}

  ActionTest:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Action-Test
        uses: ./
        with:
          Script: |
            LogGroup 'GitConfig - Local' {
              $configList = git config --local --list 2>&1
              $configList
              $LASTEXITCODE
            }

            LogGroup 'GitConfig - Global' {
              $configList = git config --global --list 2>&1
              $configList
              $LASTEXITCODE
            }

            LogGroup 'GitConfig - System' {
              $configList = git config --system --list 2>&1
              $configList
              $LASTEXITCODE
            }
